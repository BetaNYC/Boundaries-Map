!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).window=t.window||{})}(this,function(a){"use strict";function t(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],o=!0,s=!1,c=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done)&&(e.push(a.value),!n||e.length!==n);o=!0);}catch(t){s=!0,c=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw c}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n;!function(t,n){void 0===n&&(n={});var e=n.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===e&&o.firstChild?o.insertBefore(s,o.firstChild):o.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}('/* Body, Headers, and Text*/\n* {\n\tmargin:0;\n\tpadding:0;\n}\n\nhtml {\n\tbox-sizing:border-box;\n\theight:100%;\n}\n\nbody {\n\tbackground:#f2f6f9;\n\theight:100%;\n\tfont-family:"lato";\n\tfont-weight:normal;\n\toverflow: hidden;\n\t-webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\nh1, h2, h3 {\n\tfont-family:"Playfair Display" !important;\n\tfont-weight:1000 !important;\n\tfont-size:25px !important;\n\tpadding-bottom: 5px;\n\tmargin: 0px 0px !important;\n\ttext-align: center;\n}\n\nh1 {\n\tcolor:black !important;\n}\n\nh4 {\n\ttext-align:center;\n}\n\nh5, h6 {\n\ttext-align:justify;\n}\n\nh4, h5, h6 {\n\tfont-family:"lato" !important;\n\tfont-weight:normal !important;\n\tpadding-bottom: 5px;\n\tmargin: 0px 0px !important;\n}\n\nlabel {\n\tfont-family:"lato" !important;\n}\n\np {\n\tfont-family:"lato" !important;\n}\nspan {\n\tfont-size:12px;\n\tfont-family:"lato" !important;\n}\n\n/*Text Styles*/\n.bold {\n\tfont-weight:bold !important;\n}\n\n.lighter {\n\tcolor:#444444;\n}\n\n/*Toolboxes and Infoboxes*/\n.separator {\n\tmin-height: 1px;\n\tbackground-color: rgba(46, 60, 67, 0.08);\n\tmargin: 16px 0;\n}\n\n.toolbox_left {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tbottom:0px;\n\twidth: 30%;\n\t/*min-width:200px;\n\tmax-width: 30%;*/\n\theight:100%;\n\tz-index: 2;\n\toverflow-y:hidden;\n}\n\n@media all and (min-width: 1000px) {\n    .toolbox_left {\n\t\twidth:350px\n\t}\n}\n\n@media all and (max-width: 1000px) {\n    .toolbox_left {\n\t\twidth:300px\n\t}\n}\n\n@media all and (max-width: 800px) {\n    .toolbox_left {\n\t\twidth:200px\n\t}\n}\n\n#about {\n\tmargin-top:20px;\n}\n\n.logo {\n\twidth:50px;\n\tmargin:auto;\n\tdisplay:block;\n}\n\n.logo_caption {\n\tfont-size:10px;\n\ttext-align:center;\n\tmargin-top:5px;\n}\n\n.box {\n\theight:100%;\n\toverflow-y:auto;\n\tposition:relative;\n\toverflow-x:hidden;\n\tbackground-color:#fff;\n}\n\n.toolbox {\n\tposition:relative;\n\toverflow-y:hidden;\n\n}\n\n#info_box {\n\toverflow-y:auto;\n\tposition:relative;\n\toverflow-x:hidden;\n\theight:600px;\n}\n\n#info_box {\n\tdisplay:none;\n}\n\n.close_button,.reset_map{\n\tfont-size:11px;\n\tfloat:right;\n}\n\n\n#footer {\n\ttext-align:center !important;\n}\n\n.footer_text {\n\tfont-size:11px;\n}\n\n/*Icons and Legends*/\nhr {\n\tmargin-bottom: 10px;\n\tmargin-top: 10px;\n}\n\n.colored_line {\n\tborder:none;\n\tborder-top:3px solid #000;\n\tcolor:#fff;\n\tbackground-color:#fff;\n\theight:1px;\n\twidth:15%;\n\tmargin-left: 10px;\n}\n\n.legend_text {\n\tfont-size:11px;\n}\n\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 22px;\n  height: 14px;\n  margin-right: 5px;\n}\n\n.switch input {display:none;}\n\n.slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  transition: .4s;\n}\n\n.slider:before {\n  position: absolute;\n  content: "";\n  height: 8px;\n  width: 8px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: .4s;\n}\n\ninput:checked + .slider {\n  background-color: #6a6a6a;\n}\n\ninput:focus + .slider {\n  box-shadow: 0 0 1px #6a6a6a;\n}\n\ninput:checked + .slider:before {\n  -webkit-transform: translateX(8px);\n  transform: translateX(8px);\n}\n\n/*Map*/\n#container {\n\tdisplay:flex;\n\twidth:100%;\n\theight:100%;\n}\n\n#map {\n\tflex:1;\n}\n\n@media all and (min-width: 1000px) {\n    .leaflet-left{\n        left: 335px;\n    }\n}\n\n@media all and (max-width: 1000px) {\n    .leaflet-left{\n        left: 285px;\n    }\n}\n\n@media all and (max-width: 800px) {\n    .leaflet-left{\n        left: 185px;\n \t}\n}\n\n.leaflet-control-zoom-out {\n\tbackground-color:#fff !important;\n}\n\n.leaflet-control-zoom-in {\n\tbackground-color:#fff !important;\n}\n\n.leaflet-bar {\n\tborder:1px solid rgba(46, 60, 67, 0.08) !important;\n}\n\n/*Search*/\n#no_results {\n\tdisplay:none;\n}\n\n.search_label {\n\tfont-size:14px !important;\n}\n\ninput[type=submit] {\n  background-color: #6a6a6a;\n  border: none;\n  color: white;\n  padding: 5px 10px;\n  text-decoration: none;\n  cursor: pointer;\n\tfont-family:"lato" !important;\n\tmargin-top:5px;\n}\n.search_bar {\n\twidth:100%;\n  padding: 5px 15px;\n  box-sizing: border-box;\n}\n\n.select_custom {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: 100%;\n\tmargin-top:5px;\n\tmargin-bottom: 5px;\n}\n\n.select_custom select {\n\tdisplay: inline-block;\n\twidth: 100%;\n\tpadding: 10px 15px;\n\tcursor: pointer;\n\tcolor: #7b7b7b;\n\tborder: 0;\n\tborder-radius: 0;\n\toutline: 0;\n\tbackground: #e6e6e6;\n\tappearance: none;\n\t-webkit-appearance: none;\n\t-moz-appearance: none;\n}\n\n.select_custom select::-ms-expand {\n\tdisplay: none;\n}\n\n.select_custom select:hover,\n.select_custom select:focus {\n\tcolor: #000;\n\tbackground: #ccc;\n}\n\n.select_custom select:disabled {\n\tpointer-events: none;\n\topacity: .5;\n}\n\n.select_arrow {\n\tposition: absolute;\n\ttop: 12px;\n\tright: 15px;\n\twidth: 0;\n\theight: 0;\n\tpointer-events: none;\n\tborder-width: 8px 5px 0 5px;\n\tborder-style: solid;\n\tborder-color: #7b7b7b transparent transparent transparent;\n}\n.select_custom select:hover ~ .select_arrow,\n.select_custom select:focus ~ .select_arrow {\n\tborder-top-color: #000;\n}\n\n.select_custom select:disabled ~ .select_arrow {\n\tborder-top-color: #ccc;\n}\n\n.city_icons {\n\twidth:50px;\n\tfloat: left;\n\tmargin-right:10px;\n}\n/*Clears and Margins*/\n.clearfix {\n\toverflow: auto;\n\twidth:100%;\n}\n');var u="0cdd88f5e816766aec13f416ec14b633e6ecb4b6",p=(t(n={cd:{name:"Community Districts",sql:"SELECT * FROM nycd WHERE (borocd BETWEEN 101 AND 112) or (borocd BETWEEN 201 AND 212) or (borocd BETWEEN 301 AND 318) or (borocd BETWEEN 401 AND 414) or (borocd BETWEEN 501 AND 503)",textColor:"#000000",lineColor:"#000000",textName:"borocd",extraColumns:["the_geom"],url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT borocd FROM nycd WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nycd.the_geom) &api_key="+u},icon:"static/NYCCo_human_group_a_01.jpg",formatContent:function(t){return function(t,n){var e;switch(t){case"1":e="Manhattan - ".concat(n);break;case"2":e="Bronx - ".concat(n);break;case"3":e="Brooklyn - ".concat(n);break;case"4":e="Queens - ".concat(n);break;case"5":e="Staten Island - ".concat(n);break;default:e="".concat(t," - ").concat(n)}return'<span class = "lighter">'.concat(e,"</span>")}(t.borocd.toString()[0],t.borocd.toString().substring(1,3))}},pp:{name:"Police Precincts",sql:"SELECT * FROM nypp",textColor:"#12eded",lineColor:"#12eded",textName:"precinct",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT precinct FROM nypp WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nypp.the_geom) &api_key="+u},icon:"static/NYCCo_jobs_police_01.jpg",formatContent:function(t){return function(t){return 11==t||12==t||13==t?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-south-precinct.page\'>'.concat(t,"</a> </span>"):14==t?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t,"th-precinct.page'>").concat(t,"</a> </span>"):18==t?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-north-precinct.page\'>'.concat(t,"</a> </span>"):22==t?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/central-park-precinct.page\'>'.concat(t,"</a> </span>"):t%10==1?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t,"st-precinct.page'>").concat(t,"</a> </span>"):t%10==2?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t,"nd-precinct.page'>").concat(t,"</a> </span>"):t%10==3?'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t,"rd-precinct.page'>").concat(t,"</a> </span>"):'<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t,"th-precinct.page'>").concat(t,"</a> </span>")}(t.precinct)}},sd:{name:"Sanitation Districts",sql:"SELECT cartodb_id, the_geom, the_geom_webmercator, districtco, district FROM dsny",textColor:"#12eda4",lineColor:"#12eda4",textName:"district",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT district FROM dsny WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),dsny.the_geom) &api_key="+u},icon:"static/NYCCo_sanitation_garbage_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.district,"</span>")}},fb:{name:"Fire Battilion",sql:"SELECT * FROM nyfb",textColor:"#12ed12",lineColor:"#12ed12",textName:"fire_bn",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT fire_bn FROM nyfb WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nyfb.the_geom) &api_key="+u},icon:"static/NYCCo_jobs_firefighter_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.fire_bn,"</span>")}}},"sd",{name:"School Districts",sql:"SELECT * FROM nysd",textColor:"#eded12",lineColor:"#eded12",haloFill:"#000",haloRadius:.8,textName:"schooldist",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT schooldist FROM nysd WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nysd.the_geom) &api_key="+u},icon:"static/NYCCo_food_apple_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.schooldist,"</span>")}}),t(n,"hc",{name:"Health Center Districts",sql:"SELECT * FROM nyhc",textColor:"#edbd12",lineColor:"#edbd12",textName:"hcent_dist",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT hcent_dist FROM nyhc WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nyhc.the_geom) &api_key="+u},icon:"static/NYCCo_jobs_doctor_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.hcent_dist,"</span>")}}),t(n,"cc",{name:"City Council Districts",sql:"SELECT * FROM nycc",textColor:"#ed7d12",lineColor:"#ed7d12",textName:"coundist",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT coundist FROM nycc WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nycc.the_geom) &api_key="+u},icon:"static/NYCCo_government_cityhall_01.jpg",formatContent:function(t){return'<span class = "lighter"><a target="_blank" href=\'https://council.nyc.gov/district-'.concat(t.coundist,"'>").concat(t.coundist,"</a> </span>")}}),t(n,"nycongress",{name:"Congressional Districts",sql:"SELECT * FROM nycongress",textColor:"#ed1212",lineColor:"#ed1212",textName:"cong_dist",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT cong_dist FROM nycongress WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nycongress.the_geom) &api_key="+u},icon:"static/NYCCo_domestic_a_01.jpg",formatContent:function(t){return'<span class = "lighter"><a target="_blank" href=\'https://www.govtrack.us/congress/members/NY/'.concat(t.cong_dist,"'>").concat(t.cong_dist,"</a> </span>")}}),t(n,"sa",{name:"State Assembly Districts",sql:"SELECT * FROM nysa",textColor:"#ed1294",lineColor:"#ed1294",textName:"assem_dist",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT assem_dist FROM nysa WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nysa.the_geom) &api_key="+u},icon:"static/NYCCo_governement_law_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.assem_dist,"</span>")}}),t(n,"ss",{name:"State Senate Districts",sql:"SELECT * FROM nyss",textColor:"#9912ed",lineColor:"#9912ed",textName:"st_sen_dis",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT st_sen_dis FROM nyss WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nyss.the_geom) &api_key="+u},icon:"static/NYCCo_government_justice_01.jpg",formatContent:function(t){return'<span class = "lighter"><a target="_blank" href=\'https://www.nysenate.gov/district/'.concat(t.st_sen_dis,"'>").concat(t.st_sen_dis,"</a></span>")}}),t(n,"nta",{name:"Neighborhood Tabulation Area",sql:"SELECT * FROM nynta",textColor:"#1212ed",lineColor:"#1212ed",textName:"ntaname",extraColumns:["ntacode"],url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT ntaname FROM nynta WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),nynta.the_geom) &api_key="+u},icon:"static/NYCCo_explore_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.ntaname,"</span>")}}),t(n,"bid",{name:"Business Improvement District",sql:"SELECT * FROM bids",textColor:"#129ded",lineColor:"#129ded",textName:"bid",url_intersects:function(t,n){return"https://betanyc.carto.com/api/v2/sql/?q=SELECT bid FROM bids WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+n+", "+t+"), 4326),bids.the_geom) &api_key="+u},icon:"static/NYCCo_jobs_a_01.jpg",formatContent:function(t){return'<span class = "lighter">'.concat(t.bid,"</span>")}}),n);function y(){(document.getElementById("info_box").style.display="none")&&(document.getElementById("info_box").style.display="block")}a.init=function(){a.map=L.map("map").setView([40.73,-74],11),a.map.scrollWheelZoom.disable(),L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}{r}.png",{maxZoom:18}).addTo(a.map);var r=new carto.Client({apiKey:u,username:"betanyc"});Object.entries(p).forEach(function(t){var n=i(t,2),e=n[0],o=n[1];o.source=new carto.source.SQL(o.sql);var s=o.haloFill?"\n\t\t\t\ttext-halo-fill: ".concat(o.haloFill,";\n\t\t\t\ttext-halo-radius: ").concat(o.haloRadius,";\n\t\t\t"):"";o.style=new carto.style.CartoCSS("\n\t\t\t#layer {\n\t\t\tpolygon-fill: ".concat(o.textColor,";\n\t\t\tpolygon-opacity: 0;\n\t\t\ttext-name: [").concat(o.textName,"];\n\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\ttext-fill: ").concat(o.textColor,";\n\t\t\ttext-size: 14;\n\t\t\t").concat(s,"\n\t\t\t}\n\t\t\t#layer::outline {\n\t\t\tline-width: 2.5;\n\t\t\tline-color: ").concat(o.lineColor,";\n\t\t\tline-opacity: 1;\n\t\t\t}\n\t\t\t#layer[zoom <= 10]{\n\t\t\t\ttext-size: 10;\n\t\t\t}\n\t\t\t#layer::outline [zoom <= 10]{\n\t\t\t\tmarker-width: 1.5;\n\t\t\t}\n\t\t"));var c="extraColumns"in o?o.extraColumns:[],a=[o.textName].concat(l(c));o.layer=new carto.layer.Layer(o.source,o.style,a),r.addLayer(o.layer),document.getElementById("switches").innerHTML+='\n\t\t\t<li>\n\t\t\t\t<label class="switch">\n\t\t\t\t\t<input id="'.concat(e,'" type="checkbox" name="style" onchange="toggle_layer(\'').concat(e,"')\" ").concat("cd"===e?"checked":"",'>\n\t\t\t\t\t<span class="slider"></span>\n\t\t\t\t</label>\n\t\t\t\t<h5>').concat(o.name,'</h5> <hr class="colored_line" style="border-top-color:').concat(o.lineColor,'">\n\t\t\t</li>\n\t\t'),"cd"!==e&&o.layer.hide()}),r.getLeafletLayer().addTo(a.map),L.popup({closeButton:!1})},a.layers=p,a.list_overlaps=function(){var t=document.getElementById("admin_district"),n=t.options[t.selectedIndex].value;admin_district=JSON.parse(n);var e=document.getElementById("district"),o=e.options[e.selectedIndex].value;content="<h3>"+admin_district.title+": "+o+' </h3><div class="separator"></div>',document.getElementById("info").innerHTML=content,content.cd='<img class="city_icons" src="static/NYCCo_human_group_a_01.jpg"/><h5 class = "">Community District </h5>';var s="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT borocd FROM nycd, m WHERE ST_Intersects(nycd.the_geom, m.the_geom) AND (st_area(st_intersection(nycd.the_geom, m.the_geom))/st_area(nycd.the_geom)) > .00025 ORDER BY borocd &api_key="+u;fetch(s).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++){var e=t.rows[n].borocd.toString()[0],o=t.rows[n].borocd.toString().substring(1,3);"1"==e?boro="Manhattan":"2"==e?boro="Bronx":"3"==e?boro="Brooklyn":"4"==e?boro="Queens":"5"==e&&(boro="Staten Island"),content.cd+='<span class = "lighter">'.concat(boro," - ").concat(o,"</span>"),n!=t.rows.length-1&&(content.cd+='<span class = "lighter">, </span>')}y(),document.getElementById("cd_info").innerHTML=content.cd}),content.pp='<img class="city_icons" src="static/NYCCo_jobs_police_01.jpg"/><h5 class = "">Precincts </h5>';var c="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT precinct FROM nypp, m WHERE ST_Intersects(nypp.the_geom, m.the_geom) AND (st_area(st_intersection(nypp.the_geom, m.the_geom))/st_area(nypp.the_geom)) > .00025 ORDER BY precinct &api_key="+u;fetch(c).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)11==t.rows[n].precinct||12==t.rows[n].precinct||13==t.rows[n].precinct?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-south-precinct.page\'>'.concat(t.rows[n].precinct,"</a> </span>"):14==t.rows[n].precinct?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"th-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):18==t.rows[n].precinct?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-north-precinct.page\'>'.concat(t.rows[n].precinct,"</a> </span>"):22==t.rows[n].precinct?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/central-park-precinct.page\'>'.concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==1?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"st-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==2?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"nd-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==3?content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"rd-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):content.pp+='<span class = "lighter"><a target="_blank" href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"th-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"),n!=t.rows.length-1&&(content.pp+='<span class = "lighter">, </span>');y(),document.getElementById("pp_info").innerHTML=content.pp}),content.ds='<img class="city_icons" src="static/NYCCo_sanitation_garbage_01.jpg"/><h5 class = "">Sanitation Districts </h5>';var a="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT district FROM dsny, m WHERE ST_Intersects(dsny.the_geom, m.the_geom) AND (st_area(st_intersection(dsny.the_geom, m.the_geom))/st_area(dsny.the_geom)) > .00025 ORDER BY district &api_key="+u;fetch(a).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.ds+='<span class = "lighter">'.concat(t.rows[n].district,"</span>"),n!=t.rows.length-1&&(content.ds+='<span class = "lighter">, </span>');y(),document.getElementById("ds_info").innerHTML=content.ds}),content.fb='<img class="city_icons" src="static/NYCCo_jobs_firefighter_01.jpg"/><h5 class = "">Fire Battilions </h5>';var r="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT fire_bn FROM nyfb, m WHERE ST_Intersects(nyfb.the_geom, m.the_geom) AND (st_area(st_intersection(nyfb.the_geom, m.the_geom))/st_area(nyfb.the_geom)) > .00025 ORDER BY fire_bn &api_key="+u;fetch(r).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.fb+='<span class = "lighter">'.concat(t.rows[n].fire_bn,"</span>"),n!=t.rows.length-1&&(content.fb+='<span class = "lighter">, </span>');y(),document.getElementById("fb_info").innerHTML=content.fb}),content.sd='<img class="city_icons" src="static/NYCCo_food_apple_01.jpg"/><h5 class = "">School Districts </h5>';var i="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT schooldist FROM nysd, m WHERE ST_Intersects(nysd.the_geom, m.the_geom) AND (st_area(st_intersection(nysd.the_geom, m.the_geom))/st_area(nysd.the_geom)) > .00025 ORDER BY schooldist &api_key="+u;fetch(i).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.sd+='<span class = "lighter">'.concat(t.rows[n].schooldist,"</span>"),n!=t.rows.length-1&&(content.sd+='<span class = "lighter">, </span>');y(),document.getElementById("sd_info").innerHTML=content.sd}),content.hc='<img class="city_icons" src="static/NYCCo_jobs_doctor_01.jpg"/><h5 class = "">Health Center Districts </h5>';var l="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT hcent_dist FROM nyhc, m WHERE ST_Intersects(nyhc.the_geom, m.the_geom) AND (st_area(st_intersection(nyhc.the_geom, m.the_geom))/st_area(nyhc.the_geom)) > .00025 ORDER BY hcent_dist &api_key="+u;fetch(l).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.hc+='<span class = "lighter">'.concat(t.rows[n].hcent_dist,"</span>"),n!=t.rows.length-1&&(content.hc+='<span class = "lighter">, </span>');y(),document.getElementById("hc_info").innerHTML=content.hc}),content.cc='<img class="city_icons" src="static/NYCCo_government_cityhall_01.jpg"/><h5 class = "">City Council Districts </h5>';var p="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT coundist FROM nycc, m WHERE ST_Intersects(nycc.the_geom, m.the_geom) AND (st_area(st_intersection(nycc.the_geom, m.the_geom))/st_area(nycc.the_geom)) > .00025 ORDER BY coundist &api_key="+u;fetch(p).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.cc+='<span class = "lighter"><a target="_blank" href=\'https://council.nyc.gov/district-'.concat(t.rows[n].coundist,"'>").concat(t.rows[n].coundist,"</a> </span>"),n!=t.rows.length-1&&(content.cc+='<span class = "lighter">, </span>');y(),document.getElementById("cc_info").innerHTML=content.cc}),content.congress='<img class="city_icons" src="static/NYCCo_domestic_a_01.jpg"/><h5 class = "">Congressional Districts </h5>';var d="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT cong_dist FROM nycongress, m WHERE ST_Intersects(nycongress.the_geom, m.the_geom) AND (st_area(st_intersection(nycongress.the_geom, m.the_geom))/st_area(nycongress.the_geom)) > .00025 ORDER BY cong_dist &api_key="+u;fetch(d).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.congress+='<span class = "lighter"><a target="_blank" href=\'https://www.govtrack.us/congress/members/NY/'.concat(t.rows[n].cong_dist,"'>").concat(t.rows[n].cong_dist,"</a> </span>"),n!=t.rows.length-1&&(content.congress+='<span class = "lighter">, </span>');y(),document.getElementById("congress_info").innerHTML=content.congress}),content.sa='<img class="city_icons" src="static/NYCCo_governement_law_01.jpg"/><h5 class = "">State Assembly Districts </h5>';var h="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT assem_dist FROM nysa, m WHERE ST_Intersects(nysa.the_geom, m.the_geom) AND (st_area(st_intersection(nysa.the_geom, m.the_geom))/st_area(nysa.the_geom)) > .00025 ORDER BY assem_dist &api_key="+u;fetch(h).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.sa+='<span class = "lighter">'.concat(t.rows[n].assem_dist,"</span>"),n!=t.rows.length-1&&(content.sa+='<span class = "lighter">, </span>');y(),document.getElementById("sa_info").innerHTML=content.sa}),content.ss='<img class="city_icons" src="static/NYCCo_government_justice_01.jpg"/><h5 class = "">State Senate Districts </h5>';var m="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT st_sen_dis FROM nyss, m WHERE ST_Intersects(nyss.the_geom, m.the_geom) AND (st_area(st_intersection(nyss.the_geom, m.the_geom))/st_area(nyss.the_geom)) > .00025 ORDER BY st_sen_dis &api_key="+u;fetch(m).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.ss+='<span class = "lighter"><a target="_blank" href=\'https://www.nysenate.gov/district/'.concat(t.rows[n].st_sen_dis,"'>").concat(t.rows[n].st_sen_dis,"</a></span>"),n!=t.rows.length-1&&(content.ss+='<span class = "lighter">, </span>');y(),document.getElementById("ss_info").innerHTML=content.ss}),content.nta='<img class="city_icons" src="static/NYCCo_explore_01.jpg"/><h5 class = "">Neighbhorhood Tabulation Areas </h5>';var _="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT ntaname FROM nynta, m WHERE ST_Intersects(nynta.the_geom, m.the_geom) AND (st_area(st_intersection(nynta.the_geom, m.the_geom))/st_area(nynta.the_geom)) > .00025 ORDER BY ntaname &api_key="+u;fetch(_).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.nta+='<span class = "lighter">'.concat(t.rows[n].ntaname,"</span>"),n!=t.rows.length-1&&(content.nta+='<span class = "lighter">, </span>');y(),document.getElementById("nta_info").innerHTML=content.nta}),content.bid='<img class="city_icons" src="static/NYCCo_jobs_a_01.jpg"/><h5 class = "">Business Improvement District </h5>';var g="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+o+"') SELECT bid FROM bids, m WHERE ST_Intersects(bids.the_geom, m.the_geom) AND (st_area(st_intersection(bids.the_geom, m.the_geom))/st_area(bids.the_geom)) > .00025 ORDER BY bid &api_key="+u;fetch(g).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)content.bid+='<span class = "lighter">'.concat(t.rows[n].bid,"</span>"),n!=t.rows.length-1&&(content.bid+='<span class = "lighter">, </span>');y(),document.getElementById("bid_info").innerHTML=content.bid})},a.query_district=function(){var t=document.getElementById("admin_district"),n=t.options[t.selectedIndex].value;admin_district=JSON.parse(n);var e="";!function(t){var n=["cd","pp","ds","fb","sd","hc","cc","congress","sa","ss","nta","bid"];if(!document.getElementById(t).checked){(s=document.getElementById(t)).checked=!0;var e=new Event("change");s.dispatchEvent(e)}for(var o=0;o<n.length;o++)if(n[o]!=t&&document.getElementById(n[o]).checked){var s;(s=document.getElementById(n[o])).checked=!1;e=new Event("change");s.dispatchEvent(e)}}(admin_district.html_id);var o="https://betanyc.carto.com/api/v2/sql/?q=SELECT "+admin_district.district_id+" AS district_id FROM "+admin_district.table+" ORDER BY "+admin_district.district_id+" ASC &api_key="+u;fetch(o).then(function(t){return t.json()}).then(function(t){e+='<select id="district" >';for(var n=0;n<t.rows.length;n++)e+='<option value="'.concat(t.rows[n].district_id,'">').concat(t.rows[n].district_id,"</option>");e+='</select>\n\t\t\t<div class="select_arrow"></div>\n\t\t\t</div>\n\t\t\t<input type="submit" value="Select" onclick="list_overlaps()">',document.getElementById("selected_district").innerHTML=e})},a.reset_map=function(){a.map.setView([40.73,-74],11),a.marker&&a.marker.remove()},a.set_address=function(){var t=document.getElementById("boro"),e=t.options[t.selectedIndex].value,o=document.getElementById("address").value;fetch("https://cors-anywhere.herokuapp.com/"+("https://api.cityofnewyork.us/geoclient/v1/search.json?input= "+o+" "+e+"&app_id=dd37f663&app_key=c99663c5e8b11315279f8d28ef245dab"),{mode:"cors"}).then(function(t){return t.json()}).then(function(t){document.getElementById("no_results").style.display="none";var n=t.results[0].response,s=n.latitude,c=n.longitude;a.map.setView([s,c],15),a.marker&&a.marker.remove(),a.marker=L.marker([s,c]).addTo(a.map),Promise.all(Object.entries(p).map(function(t){var n=i(t,2),e=n[0],o=n[1];return fetch(o.url_intersects(s,c)).then(function(t){return t.json()}).then(function(t){var n='<img class="city_icons" src="'.concat(o.icon,'"/><h5 class= "">').concat(o.name,"</h5>");n+=t.rows.map(function(t){return o.formatContent(t)}).join('<span class= "lighter">, </span>'),document.getElementById("".concat(e,"_info")).innerHTML=n})})).then(function(){document.getElementById("info").innerHTML='<h3 class = "bold">'.concat(o," ").concat(e,' </h3><div class="separator"></div>'),y()})}).catch(function(t){console.log(t),document.getElementById("no_results").style.display="block"})},a.show_info_box=y,a.toggle_layer=function(t){document.getElementById(t).checked?p[t].layer.show():p[t].layer.hide()},a.toggle_visibility=function(t){var n=document.getElementById(t);"block"==n.style.display?n.style.display="none":n.style.display="block"},Object.defineProperty(a,"__esModule",{value:!0})});
