!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).window=t.window||{})}(this,function(v){"use strict";!function(t,n){void 0===n&&(n={});var e=n.insertAt;if(t&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===e&&s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}('/* Body, Headers, and Text*/\n* {\n\tmargin:0;\n\tpadding:0;\n}\n\nhtml {\n\tbox-sizing:border-box;\n\theight:100%;\n}\n\nbody {\n\tbackground:#f2f6f9;\n\theight:100%;\n\tfont-family:"lato";\n\tfont-weight:normal;\n\toverflow: hidden;\n\t-webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n\nh1, h2, h3 {\n\tfont-family:"Playfair Display" !important;\n\tfont-weight:1000 !important;\n\tfont-size:25px !important;\n\tpadding-bottom: 5px;\n\tmargin: 0px 0px !important;\n\ttext-align: center;\n}\n\nh1 {\n\tcolor:black !important;\n}\n\nh4 {\n\ttext-align:center;\n}\n\nh5, h6 {\n\ttext-align:justify;\n}\n\nh4, h5, h6 {\n\tfont-family:"lato" !important;\n\tfont-weight:normal !important;\n\tpadding-bottom: 5px;\n\tmargin: 0px 0px !important;\n}\n\nlabel {\n\tfont-family:"lato" !important;\n}\n\np {\n\tfont-family:"lato" !important;\n}\nspan {\n\tfont-size:12px;\n\tfont-family:"lato" !important;\n}\n\n/*Text Styles*/\n.bold {\n\tfont-weight:bold !important;\n}\n\n.lighter {\n\tcolor:#444444;\n}\n\n/*Toolboxes and Infoboxes*/\n.separator {\n\tmin-height: 1px;\n\tbackground-color: rgba(46, 60, 67, 0.08);\n\tmargin: 16px 0;\n}\n\n.toolbox_left {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n\tbottom:0px;\n\twidth: 30%;\n\t/*min-width:200px;\n\tmax-width: 30%;*/\n\theight:100%;\n\tz-index: 2;\n\toverflow-y:hidden;\n}\n\n@media all and (min-width: 1000px) {\n    .toolbox_left {\n\t\twidth:350px\n\t}\n}\n\n@media all and (max-width: 1000px) {\n    .toolbox_left {\n\t\twidth:300px\n\t}\n}\n\n@media all and (max-width: 800px) {\n    .toolbox_left {\n\t\twidth:200px\n\t}\n}\n\n#about {\n\tmargin-top:20px;\n}\n\n.logo {\n\twidth:50px;\n\tmargin:auto;\n\tdisplay:block;\n}\n\n.logo_caption {\n\tfont-size:10px;\n\ttext-align:center;\n\tmargin-top:5px;\n}\n\n.box {\n\theight:100%;\n\toverflow-y:auto;\n\tposition:relative;\n\toverflow-x:hidden;\n\tbackground-color:#fff;\n}\n\n.toolbox {\n\tposition:relative;\n\toverflow-y:hidden;\n\n}\n\n#info_box {\n\toverflow-y:auto;\n\tposition:relative;\n\toverflow-x:hidden;\n\theight:600px;\n}\n\n#info_box {\n\tdisplay:none;\n}\n\n.close_button,.reset_map{\n\tfont-size:11px;\n\tfloat:right;\n}\n\n\n#footer {\n\ttext-align:center !important;\n}\n\n.footer_text {\n\tfont-size:11px;\n}\n\n/*Icons and Legends*/\nhr {\n\tmargin-bottom: 10px;\n\tmargin-top: 10px;\n}\n\n.colored_line {\n\tborder:none;\n\tborder-top:3px solid #000;\n\tcolor:#fff;\n\tbackground-color:#fff;\n\theight:1px;\n\twidth:15%;\n\tmargin-left: 10px;\n}\n\n.legend_text {\n\tfont-size:11px;\n}\n\n.switch {\n  position: relative;\n  display: inline-block;\n  width: 22px;\n  height: 14px;\n  margin-right: 5px;\n}\n\n.switch input {display:none;}\n\n.slider {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ccc;\n  transition: .4s;\n}\n\n.slider:before {\n  position: absolute;\n  content: "";\n  height: 8px;\n  width: 8px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: .4s;\n}\n\ninput:checked + .slider {\n  background-color: #6a6a6a;\n}\n\ninput:focus + .slider {\n  box-shadow: 0 0 1px #6a6a6a;\n}\n\ninput:checked + .slider:before {\n  -webkit-transform: translateX(8px);\n  transform: translateX(8px);\n}\n\n/*Map*/\n#container {\n\tdisplay:flex;\n\twidth:100%;\n\theight:100%;\n}\n\n#map {\n\tflex:1;\n}\n\n@media all and (min-width: 1000px) {\n    .leaflet-left{\n        left: 335px;\n    }\n}\n\n@media all and (max-width: 1000px) {\n    .leaflet-left{\n        left: 285px;\n    }\n}\n\n@media all and (max-width: 800px) {\n    .leaflet-left{\n        left: 185px;\n \t}\n}\n\n.leaflet-control-zoom-out {\n\tbackground-color:#fff !important;\n}\n\n.leaflet-control-zoom-in {\n\tbackground-color:#fff !important;\n}\n\n.leaflet-bar {\n\tborder:1px solid rgba(46, 60, 67, 0.08) !important;\n}\n\n/*Search*/\n#no_results {\n\tdisplay:none;\n}\n\n.search_label {\n\tfont-size:14px !important;\n}\n\ninput[type=submit] {\n  background-color: #6a6a6a;\n  border: none;\n  color: white;\n  padding: 5px 10px;\n  text-decoration: none;\n  cursor: pointer;\n\tfont-family:"lato" !important;\n\tmargin-top:5px;\n}\n.search_bar {\n\twidth:100%;\n  padding: 5px 15px;\n  box-sizing: border-box;\n}\n\n.select_custom {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: 100%;\n\tmargin-top:5px;\n\tmargin-bottom: 5px;\n}\n\n.select_custom select {\n\tdisplay: inline-block;\n\twidth: 100%;\n\tpadding: 10px 15px;\n\tcursor: pointer;\n\tcolor: #7b7b7b;\n\tborder: 0;\n\tborder-radius: 0;\n\toutline: 0;\n\tbackground: #e6e6e6;\n\tappearance: none;\n\t-webkit-appearance: none;\n\t-moz-appearance: none;\n}\n\n.select_custom select::-ms-expand {\n\tdisplay: none;\n}\n\n.select_custom select:hover,\n.select_custom select:focus {\n\tcolor: #000;\n\tbackground: #ccc;\n}\n\n.select_custom select:disabled {\n\tpointer-events: none;\n\topacity: .5;\n}\n\n.select_arrow {\n\tposition: absolute;\n\ttop: 12px;\n\tright: 15px;\n\twidth: 0;\n\theight: 0;\n\tpointer-events: none;\n\tborder-width: 8px 5px 0 5px;\n\tborder-style: solid;\n\tborder-color: #7b7b7b transparent transparent transparent;\n}\n.select_custom select:hover ~ .select_arrow,\n.select_custom select:focus ~ .select_arrow {\n\tborder-top-color: #000;\n}\n\n.select_custom select:disabled ~ .select_arrow {\n\tborder-top-color: #ccc;\n}\n\n.city_icons {\n\twidth:50px;\n\tfloat: left;\n\tmargin-right:10px;\n}\n/*Clears and Margins*/\n.clearfix {\n\toverflow: auto;\n\twidth:100%;\n}\n');var T="0cdd88f5e816766aec13f416ec14b633e6ecb4b6",R={},y={};function f(){(document.getElementById("info_box").style.display="none")&&(document.getElementById("info_box").style.display="block")}v.content=y,v.init=function(){v.map=L.map("map").setView([40.73,-74],11),v.map.scrollWheelZoom.disable(),L.tileLayer("https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_nolabels/{z}/{x}/{y}{r}.png",{maxZoom:18}).addTo(v.map);var t=new carto.Client({apiKey:T,username:"betanyc"}),n=new carto.source.SQL("SELECT * FROM nycd WHERE (borocd BETWEEN 101 AND 112) or (borocd BETWEEN 201 AND 212) or (borocd BETWEEN 301 AND 318) or (borocd BETWEEN 401 AND 414) or (borocd BETWEEN 501 AND 503)"),e=new carto.source.SQL("SELECT * FROM nypp"),s=new carto.source.SQL("SELECT cartodb_id, the_geom, the_geom_webmercator, districtco, district FROM dsny"),o=new carto.source.SQL("SELECT * FROM nyfb"),c=new carto.source.SQL("SELECT * FROM nysd"),a=new carto.source.SQL("SELECT * FROM nyhc"),i=new carto.source.SQL("SELECT * FROM nycc"),r=new carto.source.SQL("SELECT * FROM nycongress"),l=new carto.source.SQL("SELECT * FROM nysa"),d=new carto.source.SQL("SELECT * FROM nyss"),p=new carto.source.SQL("SELECT * FROM nynta"),h=new carto.source.SQL("SELECT * FROM bids"),m=new carto.style.CartoCSS("\n\t\t\t  #layer {\n\t\t\t\tpolygon-fill: #826dba;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [borocd];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 1.5;\n\t\t\t\tline-color: #000000;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: .5;\n\t\t\t  }\n\t\t  "),g=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #12eded;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [precinct];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #12eded;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #12eded;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),_=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #12eda4;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [district];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #12eda4;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #12eda4;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),y=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #12ed12;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [fire_bn];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #12ed12;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #12ed12;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),f=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #eded12;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [schooldist];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #eded12;\n\t\t\t\ttext-size: 14;\n\t\t\t\ttext-halo-fill: #aaa;\n\t\t\t\ttext-halo-radius: .4;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #eded12;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),u=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #edbd12;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [hcent_dist];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #edbd12;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #edbd12;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),w=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #ed7d12;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [coundist];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #ed7d12;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #ed7d12;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),b=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #ed1212;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [cong_dist];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #ed1212;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #ed1212;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),E=new carto.style.CartoCSS("\n\t\t\t   #layer {\n\t\t\t\tpolygon-fill: #ed1294;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [assem_dist];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #ed1294;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #ed1294;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),S=new carto.style.CartoCSS("\n\t\t\t  #layer {\n\t\t\t\tpolygon-fill: #9912ed;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [st_sen_dis];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #9912ed;\n\t\t\t\ttext-size: 14;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #9912ed;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t\t\t  #layer[zoom <= 10]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),x=new carto.style.CartoCSS("\n\t\t\t  #layer {\n\t\t\t\tpolygon-fill: #1212ed;\n\t\t\t\tpolygon-opacity: 0;\n\t\t\t\ttext-name: [ntaname];\n\t\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\t\ttext-fill: #1212ed;\n\t\t\t\ttext-size: 12;\n\t\t\t  }\n\t\t\t  #layer::outline {\n\t\t\t\tline-width: 2.5;\n\t\t\t\tline-color: #1212ed;\n\t\t\t\tline-opacity: 1;\n\t\t\t  }\n\t  #layer[zoom <= 14]{\n\t\t\t\t  text-size: 10;\n\t\t\t  }\n\t  #layer[zoom <= 12]{\n\t\t\t\t  text-size: 6;\n\t\t\t  }\n\t\t\t  #layer::outline [zoom <= 10]{\n\t\t\t\t  marker-width: 1.5;\n\t\t\t  }\n\t\t  "),C=new carto.style.CartoCSS("\n\t\t#layer {\n\t\t\tpolygon-fill: #129ded;\n\t\t\tpolygon-opacity: 0;\n\t\t\ttext-name: [bid];\n\t\t\ttext-face-name: 'Open Sans Regular';\n\t\t\ttext-fill: #129ded;\n\t\t\ttext-size: 12;\n\t\t}\n\t\t#layer::outline {\n\t\t  line-width: 2.5;\n\t\t\tline-color: #129ded;\n\t\t\tline-opacity: 1;\n\t\t}\n\t  #layer[zoom <= 14]{\n\t\t\ttext-size: 10;\n\t\t}\n\t  #layer[zoom <= 12]{\n\t\t\ttext-size: 6;\n\t\t}\n\t\t#layer::outline [zoom <= 10]{\n\t\t\tmarker-width: 1.5;\n\t\t}\n\t\t  ");R.cd=new carto.layer.Layer(n,m,{featureClickColumns:["borocd","the_geom"]}),R.pp=new carto.layer.Layer(e,g,{featureClickColumns:["precinct"]}),R.ds=new carto.layer.Layer(s,_,{featureClickColumns:["district"]}),R.fb=new carto.layer.Layer(o,y,{featureClickColumns:["fire_bn"]}),R.sd=new carto.layer.Layer(c,f,{featureClickColumns:["schooldist"]}),R.hc=new carto.layer.Layer(a,u,{featureClickColumns:["hcent_dist"]}),R.cc=new carto.layer.Layer(i,w,{featureClickColumns:["coundist"]}),R.congress=new carto.layer.Layer(r,b,{featureClickColumns:["cong_dist"]}),R.sa=new carto.layer.Layer(l,E,{featureClickColumns:["assem_dist"]}),R.ss=new carto.layer.Layer(d,S,{featureClickColumns:["st_sen_dis"]}),R.nta=new carto.layer.Layer(p,x,{featureClickColumns:["ntacode","ntaname"]}),R.bid=new carto.layer.Layer(h,C,{featureClickColumns:["bid"]}),t.addLayer(R.nta),t.addLayer(R.ss),t.addLayer(R.sa),t.addLayer(R.congress),t.addLayer(R.cc),t.addLayer(R.hc),t.addLayer(R.sd),t.addLayer(R.fb),t.addLayer(R.ds),t.addLayer(R.pp),t.addLayer(R.cd),t.addLayer(R.bid),R.pp.hide(),R.ds.hide(),R.fb.hide(),R.sd.hide(),R.hc.hide(),R.cc.hide(),R.congress.hide(),R.sa.hide(),R.ss.hide(),R.nta.hide(),R.bid.hide(),t.getLeafletLayer().addTo(v.map),L.popup({closeButton:!1})},v.layers=R,v.list_overlaps=function(){var t=document.getElementById("admin_district"),n=t.options[t.selectedIndex].value;admin_district=JSON.parse(n);var e=document.getElementById("district"),s=e.options[e.selectedIndex].value;y.main="<h3>"+admin_district.title+": "+s+' </h3><div class="separator"></div>',document.getElementById("info").innerHTML=y.main,y.cd='<img class="city_icons" src="static/NYCCo_human_group_a_01.jpg"/><h5 class = "">Community District </h5>';var o="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT borocd FROM nycd, m WHERE ST_Intersects(nycd.the_geom, m.the_geom) AND (st_area(st_intersection(nycd.the_geom, m.the_geom))/st_area(nycd.the_geom)) > .00025 ORDER BY borocd &api_key="+T;fetch(o).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++){var e=t.rows[n].borocd.toString()[0],s=t.rows[n].borocd.toString().substring(1,3);"1"==e?boro="Manhattan":"2"==e?boro="Bronx":"3"==e?boro="Brooklyn":"4"==e?boro="Queens":"5"==e&&(boro="Staten Island"),y.cd+='<span class = "lighter">'.concat(boro," - ").concat(s,"</span>"),n!=t.rows.length-1&&(y.cd+='<span class = "lighter">, </span>')}f(),document.getElementById("cd_info").innerHTML=y.cd}),y.pp='<img class="city_icons" src="static/NYCCo_jobs_police_01.jpg"/><h5 class = "">Precincts </h5>';var c="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT precinct FROM nypp, m WHERE ST_Intersects(nypp.the_geom, m.the_geom) AND (st_area(st_intersection(nypp.the_geom, m.the_geom))/st_area(nypp.the_geom)) > .00025 ORDER BY precinct &api_key="+T;fetch(c).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)11==t.rows[n].precinct||12==t.rows[n].precinct||13==t.rows[n].precinct?y.pp+="<span class = \"lighter\"><a href='https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-south-precinct.page'>".concat(t.rows[n].precinct,"</a> </span>"):14==t.rows[n].precinct?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"th-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):18==t.rows[n].precinct?y.pp+="<span class = \"lighter\"><a href='https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-north-precinct.page'>".concat(t.rows[n].precinct,"</a> </span>"):22==t.rows[n].precinct?y.pp+="<span class = \"lighter\"><a href='https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/central-park-precinct.page'>".concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==1?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"st-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==2?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"nd-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==3?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"rd-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"th-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"),n!=t.rows.length-1&&(y.pp+='<span class = "lighter">, </span>');f(),document.getElementById("pp_info").innerHTML=y.pp}),y.ds='<img class="city_icons" src="static/NYCCo_sanitation_garbage_01.jpg"/><h5 class = "">Sanitation Districts </h5>';var a="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT district FROM dsny, m WHERE ST_Intersects(dsny.the_geom, m.the_geom) AND (st_area(st_intersection(dsny.the_geom, m.the_geom))/st_area(dsny.the_geom)) > .00025 ORDER BY district &api_key="+T;fetch(a).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.ds+='<span class = "lighter">'.concat(t.rows[n].district,"</span>"),n!=t.rows.length-1&&(y.ds+='<span class = "lighter">, </span>');f(),document.getElementById("ds_info").innerHTML=y.ds}),y.fb='<img class="city_icons" src="static/NYCCo_jobs_firefighter_01.jpg"/><h5 class = "">Fire Battilions </h5>';var i="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT fire_bn FROM nyfb, m WHERE ST_Intersects(nyfb.the_geom, m.the_geom) AND (st_area(st_intersection(nyfb.the_geom, m.the_geom))/st_area(nyfb.the_geom)) > .00025 ORDER BY fire_bn &api_key="+T;fetch(i).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.fb+='<span class = "lighter">'.concat(t.rows[n].fire_bn,"</span>"),n!=t.rows.length-1&&(y.fb+='<span class = "lighter">, </span>');f(),document.getElementById("fb_info").innerHTML=y.fb}),y.sd='<img class="city_icons" src="static/NYCCo_food_apple_01.jpg"/><h5 class = "">School Districts </h5>';var r="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT schooldist FROM nysd, m WHERE ST_Intersects(nysd.the_geom, m.the_geom) AND (st_area(st_intersection(nysd.the_geom, m.the_geom))/st_area(nysd.the_geom)) > .00025 ORDER BY schooldist &api_key="+T;fetch(r).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.sd+='<span class = "lighter">'.concat(t.rows[n].schooldist,"</span>"),n!=t.rows.length-1&&(y.sd+='<span class = "lighter">, </span>');f(),document.getElementById("sd_info").innerHTML=y.sd}),y.hc='<img class="city_icons" src="static/NYCCo_jobs_doctor_01.jpg"/><h5 class = "">Health Center Districts </h5>';var l="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT hcent_dist FROM nyhc, m WHERE ST_Intersects(nyhc.the_geom, m.the_geom) AND (st_area(st_intersection(nyhc.the_geom, m.the_geom))/st_area(nyhc.the_geom)) > .00025 ORDER BY hcent_dist &api_key="+T;fetch(l).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.hc+='<span class = "lighter">'.concat(t.rows[n].hcent_dist,"</span>"),n!=t.rows.length-1&&(y.hc+='<span class = "lighter">, </span>');f(),document.getElementById("hc_info").innerHTML=y.hc}),y.cc='<img class="city_icons" src="static/NYCCo_government_cityhall_01.jpg"/><h5 class = "">City Council Districts </h5>';var d="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT coundist FROM nycc, m WHERE ST_Intersects(nycc.the_geom, m.the_geom) AND (st_area(st_intersection(nycc.the_geom, m.the_geom))/st_area(nycc.the_geom)) > .00025 ORDER BY coundist &api_key="+T;fetch(d).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.cc+='<span class = "lighter"><a href=\'https://council.nyc.gov/district-'.concat(t.rows[n].coundist,"'>").concat(t.rows[n].coundist,"</a> </span>"),n!=t.rows.length-1&&(y.cc+='<span class = "lighter">, </span>');f(),document.getElementById("cc_info").innerHTML=y.cc}),y.congress='<img class="city_icons" src="static/NYCCo_domestic_a_01.jpg"/><h5 class = "">Congressional Districts </h5>';var p="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT cong_dist FROM nycongress, m WHERE ST_Intersects(nycongress.the_geom, m.the_geom) AND (st_area(st_intersection(nycongress.the_geom, m.the_geom))/st_area(nycongress.the_geom)) > .00025 ORDER BY cong_dist &api_key="+T;fetch(p).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.congress+='<span class = "lighter"><a href=\'https://www.govtrack.us/congress/members/NY/'.concat(t.rows[n].cong_dist,"'>").concat(t.rows[n].cong_dist,"</a> </span>"),n!=t.rows.length-1&&(y.congress+='<span class = "lighter">, </span>');f(),document.getElementById("congress_info").innerHTML=y.congress}),y.sa='<img class="city_icons" src="static/NYCCo_governement_law_01.jpg"/><h5 class = "">State Assembly Districts </h5>';var h="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT assem_dist FROM nysa, m WHERE ST_Intersects(nysa.the_geom, m.the_geom) AND (st_area(st_intersection(nysa.the_geom, m.the_geom))/st_area(nysa.the_geom)) > .00025 ORDER BY assem_dist &api_key="+T;fetch(h).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.sa+='<span class = "lighter">'.concat(t.rows[n].assem_dist,"</span>"),n!=t.rows.length-1&&(y.sa+='<span class = "lighter">, </span>');f(),document.getElementById("sa_info").innerHTML=y.sa}),y.ss='<img class="city_icons" src="static/NYCCo_government_justice_01.jpg"/><h5 class = "">State Senate Districts </h5>';var m="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT st_sen_dis FROM nyss, m WHERE ST_Intersects(nyss.the_geom, m.the_geom) AND (st_area(st_intersection(nyss.the_geom, m.the_geom))/st_area(nyss.the_geom)) > .00025 ORDER BY st_sen_dis &api_key="+T;fetch(m).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.ss+='<span class = "lighter"><a href=\'https://www.nysenate.gov/district/'.concat(t.rows[n].st_sen_dis,"'>").concat(t.rows[n].st_sen_dis,"</a></span>"),n!=t.rows.length-1&&(y.ss+='<span class = "lighter">, </span>');f(),document.getElementById("ss_info").innerHTML=y.ss}),y.nta='<img class="city_icons" src="static/NYCCo_explore_01.jpg"/><h5 class = "">Neighbhorhood Tabulation Areas </h5>';var g="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT ntaname FROM nynta, m WHERE ST_Intersects(nynta.the_geom, m.the_geom) AND (st_area(st_intersection(nynta.the_geom, m.the_geom))/st_area(nynta.the_geom)) > .00025 ORDER BY ntaname &api_key="+T;fetch(g).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.nta+='<span class = "lighter">'.concat(t.rows[n].ntaname,"</span>"),n!=t.rows.length-1&&(y.nta+='<span class = "lighter">, </span>');f(),document.getElementById("nta_info").innerHTML=y.nta}),y.bid='<img class="city_icons" src="static/NYCCo_jobs_a_01.jpg"/><h5 class = "">Business Improvement District </h5>';var _="https://betanyc.carto.com/api/v2/sql/?q=WITH m AS (SELECT the_geom FROM "+admin_district.table+" WHERE "+admin_district.district_id+" = '"+s+"') SELECT bid FROM bids, m WHERE ST_Intersects(bids.the_geom, m.the_geom) AND (st_area(st_intersection(bids.the_geom, m.the_geom))/st_area(bids.the_geom)) > .00025 ORDER BY bid &api_key="+T;fetch(_).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.bid+='<span class = "lighter">'.concat(t.rows[n].bid,"</span>"),n!=t.rows.length-1&&(y.bid+='<span class = "lighter">, </span>');f(),document.getElementById("bid_info").innerHTML=y.bid})},v.query_district=function(){var t=document.getElementById("admin_district"),n=t.options[t.selectedIndex].value;admin_district=JSON.parse(n);var e="";!function(t){var n=["cd","pp","ds","fb","sd","hc","cc","congress","sa","ss","nta","bid"];if(!document.getElementById(t).checked){(o=document.getElementById(t)).checked=!0;var e=new Event("change");o.dispatchEvent(e)}for(var s=0;s<n.length;s++)if(n[s]!=t&&document.getElementById(n[s]).checked){var o;(o=document.getElementById(n[s])).checked=!1;e=new Event("change");o.dispatchEvent(e)}}(admin_district.html_id);var s="https://betanyc.carto.com/api/v2/sql/?q=SELECT "+admin_district.district_id+" AS district_id FROM "+admin_district.table+" ORDER BY "+admin_district.district_id+" ASC &api_key="+T;fetch(s).then(function(t){return t.json()}).then(function(t){e+='<select id="district" >';for(var n=0;n<t.rows.length;n++)e+='<option value="'.concat(t.rows[n].district_id,'">').concat(t.rows[n].district_id,"</option>");e+='</select>\n\t\t\t<div class="select_arrow"></div>\n\t\t\t</div>\n\t\t\t<input type="submit" value="Select" onclick="list_overlaps()">',document.getElementById("selected_district").innerHTML=e})},v.reset_map=function(){v.map.setView([40.73,-74],11),v.marker&&v.marker.remove()},v.set_address=function(){var t=document.getElementById("boro"),o=t.options[t.selectedIndex].value,c=document.getElementById("address").value;fetch("https://cors-anywhere.herokuapp.com/"+("https://api.cityofnewyork.us/geoclient/v1/search.json?input= "+c+" "+o+"&app_id=dd37f663&app_key=c99663c5e8b11315279f8d28ef245dab"),{mode:"cors"}).then(function(t){return t.json()}).then(function(t){document.getElementById("no_results").style.display="none";var n=t.results[0].response,e=n.latitude,s=n.longitude;v.map.setView([e,s],15),y.main="",y.cd="",y.pp="",y.ds="",y.fb="",y.sd="",y.hc="",y.cc="",y.congress="",y.sa="",y.ss="",y.nta="",y.bid="",y.main+='<h3 class = "bold">'.concat(c," ").concat(o,' </h3>\n\t\t<div class="separator"></div>'),document.getElementById("info").innerHTML=y.main,y.cd='<img class="city_icons" src="static/NYCCo_human_group_a_01.jpg"/><h5 class = "">Community District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT borocd FROM nycd WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nycd.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++){var e=t.rows[n].borocd.toString()[0],s=t.rows[n].borocd.toString().substring(1,3);"1"==e?o="Manhattan":"2"==e?o="Bronx":"3"==e?o="Brooklyn":"4"==e?o="Queens":"5"==e&&(o="Staten Island"),y.cd+='<span class = "lighter">'.concat(o," - ").concat(s,"</span>"),n!=t.rows.length-1&&(y.cd+='<span class = "lighter">, </span>')}f(),document.getElementById("cd_info").innerHTML=y.cd}),y.pp='<img class="city_icons" src="static/NYCCo_jobs_police_01.jpg"/><h5 class = "">Precinct </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT precinct FROM nypp WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nypp.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){console.log(t.rows);for(var n=0;n<t.rows.length;n++)11==t.rows[n].precinct||12==t.rows[n].precinct||13==t.rows[n].precinct?y.pp+="<span class = \"lighter\"><a href='https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-south-precinct.page'>".concat(t.rows[n].precinct,"</a> </span>"):14==t.rows[n].precinct?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"th-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):18==t.rows[n].precinct?y.pp+="<span class = \"lighter\"><a href='https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/midtown-north-precinct.page'>".concat(t.rows[n].precinct,"</a> </span>"):22==t.rows[n].precinct?y.pp+="<span class = \"lighter\"><a href='https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/central-park-precinct.page'>".concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==1?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"st-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==2?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"nd-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):t.rows[n].precinct%10==3?y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"rd-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"):y.pp+='<span class = "lighter"><a href=\'https://www1.nyc.gov/site/nypd/bureaus/patrol/precincts/'.concat(t.rows[n].precinct,"th-precinct.page'>").concat(t.rows[n].precinct,"</a> </span>"),n!=t.rows.length-1&&(y.pp+='<span class = "lighter">, </span>');f(),document.getElementById("pp_info").innerHTML=y.pp}),y.ds='<img class="city_icons" src="static/NYCCo_sanitation_garbage_01.jpg"/><h5 class = "">Sanitation District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT district FROM dsny WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),dsny.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.ds+='<span class = "lighter">'.concat(t.rows[n].district,"</span>"),n!=t.rows.length-1&&(y.ds+='<span class = "lighter">, </span>');f(),document.getElementById("ds_info").innerHTML=y.ds}),y.fb='<img class="city_icons" src="static/NYCCo_jobs_firefighter_01.jpg"/><h5 class = "">Fire Battilion </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT fire_bn FROM nyfb WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nyfb.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.fb+='<span class = "lighter">'.concat(t.rows[n].fire_bn,"</span>"),n!=t.rows.length-1&&(y.fb+='<span class = "lighter">, </span>');f(),document.getElementById("fb_info").innerHTML=y.fb}),y.sd='<img class="city_icons" src="static/NYCCo_food_apple_01.jpg"/><h5 class = "">School District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT schooldist FROM nysd WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nysd.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.sd+='<span class = "lighter">'.concat(t.rows[n].schooldist,"</span>"),n!=t.rows.length-1&&(y.sd+='<span class = "lighter">, </span>');f(),document.getElementById("sd_info").innerHTML=y.sd}),y.hc='<img class="city_icons" src="static/NYCCo_jobs_doctor_01.jpg"/><h5 class = "">Health Center District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT hcent_dist FROM nyhc WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nyhc.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.hct+='<span class = "lighter">'.concat(t.rows[n].hcent_dist,"</span>"),n!=t.rows.length-1&&(y.hc+='<span class = "lighter">, </span>');f(),document.getElementById("hc_info").innerHTML=y.hc}),y.cc='<img class="city_icons" src="static/NYCCo_government_cityhall_01.jpg"/><h5 class = "">City Council District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT coundist FROM nycc WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nycc.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.cc+='<span class = "lighter"><a href=\'https://council.nyc.gov/district-'.concat(t.rows[n].coundist,"'>").concat(t.rows[n].coundist,"</a> </span>"),n!=t.rows.length-1&&(y.cc+='<span class = "lighter">, </span>');f(),document.getElementById("cc_info").innerHTML=y.cc}),y.congress='<img class="city_icons" src="static/NYCCo_domestic_a_01.jpg"/><h5 class = "">Congressional District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT cong_dist FROM nycongress WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nycongress.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.congress+='<span class = "lighter"><a href=\'https://www.govtrack.us/congress/members/NY/'.concat(t.rows[n].cong_dist,"'>").concat(t.rows[n].cong_dist,"</a> </span>"),n!=t.rows.length-1&&(y.congress+='<span class = "lighter">, </span>');f(),document.getElementById("congress_info").innerHTML=y.congress}),y.sa='<img class="city_icons" src="static/NYCCo_governement_law_01.jpg"/><h5 class = "">State Assembly District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT assem_dist FROM nysa WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nysa.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.sa+='<span class = "lighter">'.concat(t.rows[n].assem_dist,"</span>"),n!=t.rows.length-1&&(y.sa+='<span class = "lighter">, </span>');f(),document.getElementById("sa_info").innerHTML=y.sa}),y.ss='<img class="city_icons" src="static/NYCCo_government_justice_01.jpg"/><h5 class = "">State Senate District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT st_sen_dis FROM nyss WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nyss.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.ss+='<span class = "lighter"><a href=\'https://www.nysenate.gov/district/'.concat(t.rows[n].st_sen_dis,"'>").concat(t.rows[n].st_sen_dis,"</a></span>"),n!=t.rows.length-1&&(y.ss+='<span class = "lighter">, </span>');f(),document.getElementById("ss_info").innerHTML=y.ss}),y.nta='<img class="city_icons" src="static/NYCCo_explore_01.jpg"/><h5 class = "">Neighbhorhood Tabulation Area </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT ntaname FROM nynta WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),nynta.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.nta+='<span class = "lighter">'.concat(t.rows[n].ntaname,"</span>"),n!=t.rows.length-1&&(y.nta+='<span class = "lighter">, </span>');f(),document.getElementById("nta_info").innerHTML=y.nta}),y.bid='<img class="city_icons" src="static/NYCCo_jobs_a_01.jpg"/><h5 class = "">Business Improvement District </h5>',fetch("https://betanyc.carto.com/api/v2/sql/?q=SELECT bid FROM bids WHERE ST_Intersects(ST_SetSRID(ST_MakePoint("+s+", "+e+"), 4326),bids.the_geom) &api_key="+T).then(function(t){return t.json()}).then(function(t){for(var n=0;n<t.rows.length;n++)y.bid+='<span class = "lighter">'.concat(t.rows[n].bid,"</span>"),n!=t.rows.length-1&&(y.bid+='<span class = "lighter">, </span>');f(),document.getElementById("bid_info").innerHTML=y.bid}),v.marker&&v.marker.remove(),v.marker=L.marker([e,s]).addTo(v.map)}).catch(function(t){console.log(t),document.getElementById("no_results").style.display="block"})},v.show_bid=function(){document.getElementById("bid").checked?R.bid.show():R.bid.hide()},v.show_cc=function(){document.getElementById("cc").checked?R.cc.show():R.cc.hide()},v.show_cd=function(){document.getElementById("cd").checked?R.cd.show():R.cd.hide()},v.show_congress=function(){document.getElementById("congress").checked?R.congress.show():R.congress.hide()},v.show_ds=function(){document.getElementById("ds").checked?R.ds.show():R.ds.hide()},v.show_fb=function(){document.getElementById("fb").checked?R.fb.show():R.fb.hide()},v.show_hc=function(){document.getElementById("hc").checked?R.hc.show():R.hc.hide()},v.show_info_box=f,v.show_nta=function(){document.getElementById("nta").checked?R.nta.show():R.nta.hide()},v.show_pp=function(){document.getElementById("pp").checked?R.pp.show():R.pp.hide()},v.show_sa=function(){document.getElementById("sa").checked?R.sa.show():R.sa.hide()},v.show_sd=function(){document.getElementById("sd").checked?R.sd.show():R.sd.hide()},v.show_ss=function(){document.getElementById("ss").checked?R.ss.show():R.ss.hide()},v.toggle_visibility=function(t){var n=document.getElementById(t);"block"==n.style.display?n.style.display="none":n.style.display="block"},Object.defineProperty(v,"__esModule",{value:!0})});
